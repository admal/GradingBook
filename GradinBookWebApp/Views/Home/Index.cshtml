@{
    ViewBag.Title = "User's years";
}


<div id="bodyContainer" ng-app="GradingBookApp" ng-controller="HomeController" ng-init="username='@ViewBag.username'">
    <div ng-if="errorMsg">
        <div class="alert alert-danger" role="alert">
            {{errorMsg}}
        </div>
    </div>
    <div ng-init="findUser(username)">
        @*<input type="text" name="username" value="user" ng-model="user" />
        <button class="btn btn-default" ng-click="findUser(user)">Find user!</button>*@
        <div ng-if="isLoading">
            <p class="ng-animate">LOADING...</p>
        </div>

        <div class="col-xs-10 form-group-lg">
            <select class="form-control" ng-model="currYear"
                    ng-options="year.name group by year.group_id for year in getYears track by year.id "
                    style="width: 100%; max-width: 100%;"
                    ng-change="changeYear(year.id)"></select>
        </div>
        <div class="col-xs-2">
            <div class="row">
                <div class="btn-group btn-group-lg dropdown-toggle " data-toggle="collapse">
                    <button class="btn btn-default" ng-click="showAddYearModal()">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                    <button class="btn btn-default">
                        <span class="glyphicon glyphicon-minus"></span>
                    </button>
                    <button class="btn btn-default">
                        <span class="glyphicon glyphicon-edit"></span>
                    </button>
                </div>
            </div>
        </div>
        <div class="col-xs-12">
            <table ng-table="yearsTable" class="table table-striped">
                <tr ng-repeat="subject in data">
                    <td title="'Name'" sortable="'name'">
                        <span class="btn-group  pull-left btn-group-sm">
                            <button class="btn btn-default">
                                <span class="glyphicon glyphicon-plus"></span>
                            </button>
                            <button class="btn btn-default">
                                <span class="glyphicon glyphicon-edit"></span>
                            </button>
                        </span>
                        <span style="margin-left: 1em;">
                            {{subject.name}}
                        </span>
                    </td>
                    <td title="'Grades'">
                        <span ng-repeat="grade in subject.SubjectDetails">{{grade.grade_value + ' '}}</span>
                        <button class="btn btn-default pull-right" ng-click="addGrade(grade.sub_id)">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/angular")
@Scripts.Render("~/Scripts/angular-animate.js")
@Scripts.Render("~/bundles/ng-table")
@Scripts.Render("~/Scripts/angular-ui/ui-bootstrap.js")
@Scripts.Render("~/Scripts/angular-ui/ui-bootstrap-tpls.js")
@Scripts.Render("~/ScriptsApp/Controllers/HomeController.js")


